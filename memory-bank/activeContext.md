# アクティブコンテキスト

## プロジェクト
株式分析システム

## 現在の作業
- プロトタイプの安定化と改善 (完了)
- 日本語フォント表示問題の解決 (完了)
- レポート自動更新システムの開発 (進行中)
  - 定期実行バッチの実装完了
  - レポート差分検出機能開発中
- テクニカル指標の拡張
  - MACD指標の実装完了
  - 新しい指標のテスト中
- AIエージェントシステムの改善
  - Evaluator-Optimizerワークフローの最適化完了
  - 推奨ロジックの精度向上
- バックエンド処理の最適化
  - テクニカル指標計算のバッチ処理実装
  - データベース接続設定の強化

## 直近の変更
- technical_indicator_calculator.py: 引数解析機能追加、バッチ処理最適化
- technical_indicators.py: 指標計算と保存処理の分離、UPSERT処理実装
- utils.py: データベース接続設定強化、銘柄グループ処理関数追加
- api.py: テクニカル指標日付(technical_date)の追加、ログ出力改善
- frontend: 指標日付列の追加、ソート機能改善、RSI表示フォーマット修正

## 次のステップ
1. Evaluator-Optimizerワークフローのテストと調整
2. レポートのAI推奨表示の改善
3. タスクスケジューラによる定期実行機能の実装
4. 新しいテクニカル指標（MACD）の追加
5. レポートテンプレートのカスタマイズ機能開発

## 検討事項
- データ更新戦略（リアルタイム vs バッチ）
- 追加データソースの統合（Alpha Vantageなど）
- クラウドストレージへのバックアップ実装

## 重要な決定
- 本番環境DBとしてPostgreSQLを継続採用
- Yahoo Finance APIを主要データソースとして維持
- 対象銘柄を拡大（任天堂(7974.T)を追加予定）

## 学習事項
- Matplotlibの詳細なカスタマイズ方法
- PostgreSQLのバックアップと復旧戦略
- pandasを使った大規模データ処理の最適化
- テクニカル指標計算の数学的基礎
- Windows環境での依存関係管理のベストプラクティス

## 2025-07-27
### 課題
- フロントエンドの株式一覧テーブルが中央寄せにならない問題（修正済み）
- バックエンドAPIエンドポイントがハードコードされている問題
- ストラテジーパターンが完全に実装されていない問題

### 次のアクション
1. APIエンドポイントの環境変数化
2. ストラテジーパターンの完全実装

## 未解決課題

### フロントエンドヘッダー表示
- **問題**: テーブルヘッダーの文字視認性不足
- **暫定対応**: 文字色を#333（濃いグレー）に変更
- **根本的解決が必要な事項**:
  - デザインシステム全体の見直し
  - アクセシビリティ基準への準拠
  - カラーパレットの再設計

## 2025-08-03
### 実施した変更
1. バックエンドロガー設定の統一化
   - ロガー名を柔軟に指定可能に
   - ログレベルをDEBUGに変更
   - 全モジュールで一貫した設定を適用

2. DeepSeek推奨ロジックの改善
   - クエリの最適化
   - フィルタリング条件の修正
   - データ取得時のLIMITパラメータ追加

3. GitHub変更管理プロセスの確立
   - 変更内容のサマライズ方法
   - 適切なコミットメッセージの作成
   - 変更のプッシュ手順

### 標準化されたGitHub保存手順
1. 変更内容を確認 (`git status`, `git diff`)
2. 変更をステージング (`git add .`)
3. 適切なコミットメッセージでコミット
4. メモリバンクを更新
5. 変更をプッシュ (`git push origin main`)

### 次のアクション
1. この変更管理プロセスを全ての機能開発に適用
2. メモリバンクの自動更新スクリプト作成
