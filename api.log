2025-07-26 16:11:59,460 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 16:11:59,498 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 16:11:59,499 - INFO - クエリを実行します: 
            SELECT symbol, name, sector 
            FROM stocks 
            ORDER BY symbol
            LIMIT 50
        
2025-07-26 16:11:59,500 - ERROR - 銘柄一覧取得エラー: column "sector" does not exist
LINE 2:             SELECT symbol, name, sector 
                                         ^
Traceback (most recent call last):
  File "C:\Dev\stock-analyzer\api.py", line 84, in get_stocks
    cursor.execute(query)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Dev\stock-analyzer\venv\Lib\site-packages\psycopg2\extras.py", line 236, in execute
    return super().execute(query, vars)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "sector" does not exist
LINE 2:             SELECT symbol, name, sector 
                                         ^

2025-07-26 16:11:59,515 - INFO - データベース接続をクローズしました
2025-07-26 16:13:42,513 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 16:13:42,533 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 16:13:42,533 - INFO - クエリを実行します: 
            SELECT symbol, name 
            FROM stocks 
            ORDER BY symbol
            LIMIT 50
        
2025-07-26 16:13:42,540 - INFO - 50件の銘柄データを取得しました
2025-07-26 16:13:42,540 - INFO - データベース接続をクローズしました
2025-07-26 16:15:50,930 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 16:15:50,951 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 16:15:50,952 - INFO - クエリを実行します: 
            SELECT symbol, name 
            FROM stocks 
            ORDER BY symbol
            LIMIT 50
        
2025-07-26 16:15:50,955 - INFO - 50件の銘柄データを取得しました
2025-07-26 16:15:50,956 - INFO - データベース接続をクローズしました
2025-07-26 16:15:50,957 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 16:15:50,967 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 16:15:50,968 - INFO - クエリを実行します: 
            SELECT symbol, name 
            FROM stocks 
            ORDER BY symbol
            LIMIT 50
        
2025-07-26 16:15:50,971 - INFO - 50件の銘柄データを取得しました
2025-07-26 16:15:50,971 - INFO - データベース接続をクローズしました
2025-07-26 16:30:49,830 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 16:30:49,848 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 16:30:49,848 - INFO - クエリを実行します: 
            SELECT symbol, name, industry 
            FROM stocks 
            ORDER BY symbol
            LIMIT 50
        
2025-07-26 16:30:49,852 - INFO - 50件の銘柄データを取得しました
2025-07-26 16:30:49,853 - INFO - データベース接続をクローズしました
2025-07-26 16:30:49,855 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 16:30:49,882 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 16:30:49,882 - INFO - クエリを実行します: 
            SELECT symbol, name, industry 
            FROM stocks 
            ORDER BY symbol
            LIMIT 50
        
2025-07-26 16:30:49,885 - INFO - 50件の銘柄データを取得しました
2025-07-26 16:30:49,885 - INFO - データベース接続をクローズしました
2025-07-26 16:32:45,125 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 16:32:45,149 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 16:32:45,149 - INFO - クエリを実行します: 
            SELECT symbol, name, industry 
            FROM stocks 
            ORDER BY symbol
            LIMIT 50
        
2025-07-26 16:32:45,152 - INFO - 50件の銘柄データを取得しました
2025-07-26 16:32:45,152 - INFO - データベース接続をクローズしました
2025-07-26 16:32:45,154 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 16:32:45,177 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 16:32:45,178 - INFO - クエリを実行します: 
            SELECT symbol, name, industry 
            FROM stocks 
            ORDER BY symbol
            LIMIT 50
        
2025-07-26 16:32:45,181 - INFO - 50件の銘柄データを取得しました
2025-07-26 16:32:45,181 - INFO - データベース接続をクローズしました
2025-07-26 16:36:50,290 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 16:36:50,313 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 16:36:50,314 - INFO - クエリを実行します: 
            SELECT symbol, name, industry 
            FROM stocks 
            ORDER BY symbol
            LIMIT 50
        
2025-07-26 16:36:50,317 - INFO - 50件の銘柄データを取得しました
2025-07-26 16:36:50,317 - INFO - データベース接続をクローズしました
2025-07-26 16:36:50,320 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 16:36:50,359 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 16:36:50,360 - INFO - クエリを実行します: 
            SELECT symbol, name, industry 
            FROM stocks 
            ORDER BY symbol
            LIMIT 50
        
2025-07-26 16:36:50,362 - INFO - 50件の銘柄データを取得しました
2025-07-26 16:36:50,363 - INFO - データベース接続をクローズしました
2025-07-26 17:23:54,266 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 17:23:54,287 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 17:23:54,288 - INFO - クエリを実行します: 
            SELECT 
                s.symbol, 
                s.name, 
                s.industry,
                ti.golden_cross,
                ti.dead_cross,
                ti.rsi,
                ti.macd,
                ti.signal_line
            FROM stocks s
            LEFT JOIN (
                SELECT DISTINCT ON (symbol) *
                FROM technical_indicators
                ORDER BY symbol, date DESC
            ) ti ON s.symbol = ti.symbol
            ORDER BY s.symbol
            LIMIT 50
        
2025-07-26 17:23:55,367 - INFO - 50件の銘柄データを取得しました
2025-07-26 17:23:55,368 - INFO - データベース接続をクローズしました
2025-07-26 17:23:55,378 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 17:23:55,391 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 17:23:55,391 - INFO - クエリを実行します: 
            SELECT 
                s.symbol, 
                s.name, 
                s.industry,
                ti.golden_cross,
                ti.dead_cross,
                ti.rsi,
                ti.macd,
                ti.signal_line
            FROM stocks s
            LEFT JOIN (
                SELECT DISTINCT ON (symbol) *
                FROM technical_indicators
                ORDER BY symbol, date DESC
            ) ti ON s.symbol = ti.symbol
            ORDER BY s.symbol
            LIMIT 50
        
2025-07-26 17:23:56,035 - INFO - 50件の銘柄データを取得しました
2025-07-26 17:23:56,035 - INFO - データベース接続をクローズしました
2025-07-26 17:24:20,167 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 17:24:20,179 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 17:24:20,179 - INFO - クエリを実行します: 
            SELECT 
                s.symbol, 
                s.name, 
                s.industry,
                ti.golden_cross,
                ti.dead_cross,
                ti.rsi,
                ti.macd,
                ti.signal_line
            FROM stocks s
            LEFT JOIN (
                SELECT DISTINCT ON (symbol) *
                FROM technical_indicators
                ORDER BY symbol, date DESC
            ) ti ON s.symbol = ti.symbol
            ORDER BY s.symbol
            LIMIT 50
        
2025-07-26 17:24:20,829 - INFO - 50件の銘柄データを取得しました
2025-07-26 17:24:20,829 - INFO - データベース接続をクローズしました
2025-07-26 17:24:20,835 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 17:24:20,867 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 17:24:20,867 - INFO - クエリを実行します: 
            SELECT 
                s.symbol, 
                s.name, 
                s.industry,
                ti.golden_cross,
                ti.dead_cross,
                ti.rsi,
                ti.macd,
                ti.signal_line
            FROM stocks s
            LEFT JOIN (
                SELECT DISTINCT ON (symbol) *
                FROM technical_indicators
                ORDER BY symbol, date DESC
            ) ti ON s.symbol = ti.symbol
            ORDER BY s.symbol
            LIMIT 50
        
2025-07-26 17:24:21,524 - INFO - 50件の銘柄データを取得しました
2025-07-26 17:24:21,525 - INFO - データベース接続をクローズしました
2025-07-26 17:33:17,583 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 17:33:17,595 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 17:33:17,596 - INFO - クエリを実行します: 
            SELECT 
                s.symbol, 
                s.name, 
                s.industry,
                ti.golden_cross,
                ti.dead_cross,
                ti.rsi,
                ti.macd,
                ti.signal_line
            FROM stocks s
            LEFT JOIN (
                SELECT DISTINCT ON (symbol) *
                FROM technical_indicators
                ORDER BY symbol, date DESC
            ) ti ON s.symbol = ti.symbol
            ORDER BY s.symbol
            LIMIT 50
        
2025-07-26 17:33:18,254 - INFO - 50件の銘柄データを取得しました
2025-07-26 17:33:18,255 - INFO - データベース接続をクローズしました
2025-07-26 17:33:18,263 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 17:33:18,289 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 17:33:18,290 - INFO - クエリを実行します: 
            SELECT 
                s.symbol, 
                s.name, 
                s.industry,
                ti.golden_cross,
                ti.dead_cross,
                ti.rsi,
                ti.macd,
                ti.signal_line
            FROM stocks s
            LEFT JOIN (
                SELECT DISTINCT ON (symbol) *
                FROM technical_indicators
                ORDER BY symbol, date DESC
            ) ti ON s.symbol = ti.symbol
            ORDER BY s.symbol
            LIMIT 50
        
2025-07-26 17:33:18,906 - INFO - 50件の銘柄データを取得しました
2025-07-26 17:33:18,907 - INFO - データベース接続をクローズしました
2025-07-26 17:33:28,378 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 17:33:28,401 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 17:33:28,401 - INFO - クエリを実行します: 
            SELECT 
                s.symbol, 
                s.name, 
                s.industry,
                ti.golden_cross,
                ti.dead_cross,
                ti.rsi,
                ti.macd,
                ti.signal_line
            FROM stocks s
            LEFT JOIN (
                SELECT DISTINCT ON (symbol) *
                FROM technical_indicators
                ORDER BY symbol, date DESC
            ) ti ON s.symbol = ti.symbol
            ORDER BY s.symbol
            LIMIT 50
        
2025-07-26 17:33:29,074 - INFO - 50件の銘柄データを取得しました
2025-07-26 17:33:29,075 - INFO - データベース接続をクローズしました
2025-07-26 18:02:49,622 - INFO - CORSミドルウェアが設定されました: すべてのオリジンを許可
2025-07-26 18:21:23,812 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 18:21:23,839 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 18:21:23,839 - INFO - クエリを実行します: 
            SELECT 
                s.symbol, 
                s.name, 
                s.industry,
                ti.golden_cross,
                ti.dead_cross,
                ti.rsi,
                ti.macd,
                ti.signal_line
            FROM stocks s
            LEFT JOIN (
                SELECT DISTINCT ON (symbol) *
                FROM technical_indicators
                ORDER BY symbol, date DESC
            ) ti ON s.symbol = ti.symbol
            ORDER BY s.symbol
            LIMIT 50
        
2025-07-26 18:21:24,933 - INFO - 50件の銘柄データを取得しました
2025-07-26 18:21:24,934 - INFO - データベース接続をクローズしました
2025-07-26 18:21:24,943 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 18:21:24,965 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 18:21:24,965 - INFO - クエリを実行します: 
            SELECT 
                s.symbol, 
                s.name, 
                s.industry,
                ti.golden_cross,
                ti.dead_cross,
                ti.rsi,
                ti.macd,
                ti.signal_line
            FROM stocks s
            LEFT JOIN (
                SELECT DISTINCT ON (symbol) *
                FROM technical_indicators
                ORDER BY symbol, date DESC
            ) ti ON s.symbol = ti.symbol
            ORDER BY s.symbol
            LIMIT 50
        
2025-07-26 18:21:25,594 - INFO - 50件の銘柄データを取得しました
2025-07-26 18:21:25,594 - INFO - データベース接続をクローズしました
2025-07-26 18:22:57,845 - INFO - データベース接続を試行します: {'dbname': 'stock_analyzer', 'user': 'stock_user', 'password': '******', 'host': 'localhost', 'port': '5432'}
2025-07-26 18:22:57,869 - INFO - データベース接続成功: stock_analyzer@localhost:5432
2025-07-26 18:22:57,869 - INFO - クエリを実行します: 
            SELECT 
                s.symbol, 
                s.name, 
                s.industry,
                ti.golden_cross,
                ti.dead_cross,
                ti.rsi,
                ti.macd,
                ti.signal_line
            FROM stocks s
            LEFT JOIN (
                SELECT DISTINCT ON (symbol) *
                FROM technical_indicators
                ORDER BY symbol, date DESC
            ) ti ON s.symbol = ti.symbol
            ORDER BY s.symbol
            LIMIT 50
        
2025-07-26 18:22:58,831 - INFO - 50件の銘柄データを取得しました
2025-07-26 18:22:58,831 - INFO - データベース接続をクローズしました
2025-07-26 18:26:12,671 - INFO - CORSミドルウェアが設定されました: すべてのオリジンを許可
